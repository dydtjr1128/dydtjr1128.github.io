<script src="{{"/assets/vendor/jquery/jquery.min.js" | relative_url }}"></script>
<script src="{{"/assets/vendor/bootstrap/js/bootstrap.bundle.min.js" | relative_url }}"></script>
<script src="{{"/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js" | relative_url }}"></script>

<script src="{{"/assets/scripts.js" | relative_url }}"></script>
<script src="/assets/codeStyle/prism.js"></script>
<script>
    $(document).ready( function() {
        $('img').lazyload();
    });
</script>
{% if page.url contains 'contact' %}
  <!-- Async Hangul Font loader-->
  <script type="text/javascript">
    WebFontConfig = {
      custom: {
          families: ['Nanum Gothic'],
          urls: ['http://fonts.googleapis.com/earlyaccess/nanumgothic.css']
      }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1.4.10/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })(); 
   </script>

  <!-- Form Validation -->
  <script src="{{"/assets/vendor/startbootstrap-clean-blog/js/jqBootstrapValidation.js" | relative_url }}"></script>
  <!-- Google form submission -->
  <script data-cfasync="false" type="text/javascript"
  src="https://cdn.rawgit.com/dwyl/html-form-send-email-via-google-script-without-server/master/form-submission-handler.js"></script>
  <!-- Send Form -->  
  <script>  
  $(function () {

  $("#contactForm input,#contactForm textarea").jqBootstrapValidation({
  preventSubmit: true,
  submitError: function ($form, event, errors) {
    // additional error messages or events
  },
  submitSuccess: function ($form, event) {
    event.preventDefault(); // prevent default submit behaviour

    if($("input#honeypot").val()!="")
        return;

    // get values from FORM
    var name = $("input#name").val();
    var email = $("input#email").val();
    var phone = $("input#phone").val();
    var message = $("textarea#message").val();
    var firstName = name; // For Success/Failure Message
    // Check for white space in name for Success/Fail message
    if (firstName.indexOf(' ') >= 0) {
      firstName = name.split(' ').slice(0, -1).join(' ');
    }
    $this = $("#sendMessageButton");
    $this.prop("disabled", true); // Disable submit button until AJAX call is complete to prevent duplicate messages
    $.ajax({
      url: "https://script.google.com/macros/s/AKfycbxYFxn1H05S3knMgs4P5UcjIL9PwtZDHuPhB6vW/exec",
      type: "POST",
      data: {
        name: name,
        phone: phone,
        email: email,
        message: message
      },
      cache: false,
      success: function (data) {
        // Success message
        $('#success').html("<div class='alert alert-success'>");
        $('#success > .alert-success').html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>");
        $('#success > .alert-success').append("<strong>Your message has been sent. </strong>");
        $('#success > .alert-success').append('</div>');
        //clear all fields
        $('#contactForm').trigger("reset");
      },
      error: function () {
        // Fail message
        $('#success').html("<div class='alert alert-danger'>");
        $('#success > .alert-danger').html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>");
        $('#success > .alert-danger').append($("<strong>").text("Sorry " + firstName + ", it seems that my mail server is not responding. Please try again later!"));
        $('#success > .alert-danger').append('</div>');
        //clear all fields
        $('#contactForm').trigger("reset");
      },
      complete: function () {
        setTimeout(function () {
          $this.prop("disabled", false); // Re-enable submit button when AJAX call is complete
        }, 1000);
      }
    });
  },
  filter: function () {
    return $(this).is(":visible");
  }
});

$("a[data-toggle=\"tab\"]").click(function (e) {
  e.preventDefault();
  $(this).tab("show");
});
});

//When clicking on Full hide fail/success boxes 
$('#name').focus(function () {
$('#success').html('');
});
  </script>
{% endif %}